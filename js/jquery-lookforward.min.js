/**
 * Modules in this bundle
 * @license
 *
 * lookforward:
 *   license: MIT (http://opensource.org/licenses/MIT)
 *   author: appleple
 *   homepage: http://developer.a-blogcms.jp
 *   version: 0.0.14
 *
 * es6-object-assign:
 *   license: MIT (http://opensource.org/licenses/MIT)
 *   author: Rub√©n Norte <rubennorte@gmail.com>
 *   homepage: https://github.com/rubennorte/es6-object-assign
 *   version: 1.1.0
 *
 * es6-promise-polyfill:
 *   license: MIT (http://opensource.org/licenses/MIT)
 *   author: Roman Dvornov <rdvornov@gmail.com>
 *   version: 1.2.0
 *
 * This header is generated by licensify (https://github.com/twada/licensify)
 */
!function t(e,n,o){function r(a,s){if(!n[a]){if(!e[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var d=n[a]={exports:{}};e[a][0].call(d.exports,function(t){var n=e[a][1][t];return r(n||t)},d,d.exports,t,e,n,o)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<o.length;a++)r(o[a]);return r}({1:[function(t,e,n){"use strict";function o(t,e){if(void 0===t||null===t)throw new TypeError("Cannot convert first argument to object");for(var n=Object(t),o=1;o<arguments.length;o++){var r=arguments[o];if(void 0!==r&&null!==r)for(var i=Object.keys(Object(r)),a=0,s=i.length;a<s;a++){var c=i[a],u=Object.getOwnPropertyDescriptor(r,c);void 0!==u&&u.enumerable&&(n[c]=r[c])}}return n}function r(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:o})}e.exports={assign:o,polyfill:r}},{}],2:[function(t,e,n){(function(t){!function(t){function e(t){return"[object Array]"===Object.prototype.toString.call(t)}function o(){for(var t=0;t<_.length;t++)_[t][0](_[t][1]);_=[],w=!1}function r(t,e){_.push([t,e]),w||(w=!0,E(o,0))}function i(t,e){function n(t){c(e,t)}function o(t){d(e,t)}try{t(n,o)}catch(t){o(t)}}function a(t){var e=t.owner,n=e.state_,o=e.data_,r=t[n],i=t.then;if("function"==typeof r){n=b;try{o=r(o)}catch(t){d(i,t)}}s(i,o)||(n===b&&c(i,o),n===k&&d(i,o))}function s(t,e){var n;try{if(t===e)throw new TypeError("A promises callback cannot return that same promise.");if(e&&("function"==typeof e||"object"==typeof e)){var o=e.then;if("function"==typeof o)return o.call(e,function(o){n||(n=!0,e!==o?c(t,o):u(t,o))},function(e){n||(n=!0,d(t,e))}),!0}}catch(e){return n||d(t,e),!0}return!1}function c(t,e){t!==e&&s(t,e)||u(t,e)}function u(t,e){t.state_===m&&(t.state_=g,t.data_=e,r(f,t))}function d(t,e){t.state_===m&&(t.state_=g,t.data_=e,r(h,t))}function l(t){var e=t.then_;t.then_=void 0;for(var n=0;n<e.length;n++)a(e[n])}function f(t){t.state_=b,l(t)}function h(t){t.state_=k,l(t)}function v(t){if("function"!=typeof t)throw new TypeError("Promise constructor takes a function argument");if(this instanceof v==!1)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this.then_=[],i(t,this)}var p=t.Promise,y=p&&"resolve"in p&&"reject"in p&&"all"in p&&"race"in p&&function(){var t;return new p(function(e){t=e}),"function"==typeof t}();void 0!==n&&n?(n.Promise=y?p:v,n.Polyfill=v):"function"==typeof define&&define.amd?define(function(){return y?p:v}):y||(t.Promise=v);var w,m="pending",g="sealed",b="fulfilled",k="rejected",L=function(){},E="undefined"!=typeof setImmediate?setImmediate:setTimeout,_=[];v.prototype={constructor:v,state_:m,then_:null,data_:void 0,then:function(t,e){var n={owner:this,then:new this.constructor(L),fulfilled:t,rejected:e};return this.state_===b||this.state_===k?r(a,n):this.then_.push(n),n.then},catch:function(t){return this.then(null,t)}},v.all=function(t){var n=this;if(!e(t))throw new TypeError("You must pass an array to Promise.all().");return new n(function(e,n){for(var o,r=[],i=0,a=0;a<t.length;a++)o=t[a],o&&"function"==typeof o.then?o.then(function(t){return i++,function(n){r[t]=n,--i||e(r)}}(a),n):r[a]=o;i||e(r)})},v.race=function(t){var n=this;if(!e(t))throw new TypeError("You must pass an array to Promise.race().");return new n(function(e,n){for(var o,r=0;r<t.length;r++)o=t[r],o&&"function"==typeof o.then?o.then(e,n):e(o)})},v.resolve=function(t){var e=this;return t&&"object"==typeof t&&t.constructor===e?t:new e(function(e){e(t)})},v.reject=function(t){return new this(function(e,n){n(t)})}}("undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(t,e,n){"use strict";var o=t("../index"),r=function(t){t.fn.smartPhoto=function(t){return"strings"==typeof t||new o(this.selector,t),this}};if("function"==typeof define&&define.amd)define(["jquery"],r);else{var i=window.jQuery?window.jQuery:window.$;void 0!==i&&r(i)}e.exports=r},{"../index":5}],4:[function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=t("../lib/util"),a=t("es6-object-assign").assign,s=t("es6-promise-polyfill").Promise,c={classNames:{LookForward:"lookforward",LookForwardBody:"lookforward-body",LookForwardInner:"lookforward-inner",LookForwardClose:"lookforward-close",LookForwardCloseBtn:"lookforward-close-btn",LookForwardHeader:"lookforward-header",LookForwardFooter:"lookforward-footer"},transitionEnter:"",transitionLeave:"",scrapedArea:"body",useHistoryApi:!0},u=function(){function t(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,t),this.options=a({},c,r),this.id=(0,i.getUniqId)();var s="string"==typeof e?document.querySelectorAll(e):e,u=document.querySelector("body");this.currentUrl=location.href,this.selector=e,this.historyLength=0,s&&([].forEach.call(s,function(t){n.addClickEvent(t)}),(0,i.append)(u,'<div id="'+this.id+'"></div>'),window.history&&this.options.useHistoryApi&&window.addEventListener("popstate",function(t){var e=t.state;if(e&&e.pushed){var o=e.transitionEnter,r=e.transitionLeave,a=(0,i.getUniqId)(),s=n.buildHtml(e.html,a,o,r);n.historyLength>=e.historyLength?n.removeModal():n.addModal(s),n.historyLength=e.historyLength}else n.removeModal().then(function(){u.style.overflow="",n._fireEvent("closeAll")})}))}return r(t,[{key:"on",value:function(t,e){var n=this;document.querySelector("#"+this.id).addEventListener(t,function(t){e.call(n,t)})}},{key:"addClickEvent",value:function(t){var e=this;t.addEventListener("click",function(n){n.preventDefault();var o=t.getAttribute("href"),r=t.dataset.transitionEnter||e.options.transitionEnter,a=t.dataset.transitionLeave||e.options.transitionLeave;(0,i.fetch)(o).then(function(t){var n=t.querySelector(e.options.scrapedArea);if(n){var s=(0,i.getUniqId)(),c=e.buildHtml(n.innerHTML,s,r,a);if(e.addModal(c),window.history&&e.options.useHistoryApi){var u=e.historyLength;window.history.pushState({pushed:!0,html:n.innerHTML,id:s,transitionEnter:r,transitionLeave:a,historyLength:u},"",o)}}})})}},{key:"addModal",value:function(t){var e=this,n=this.id,o=this.selector,r=document.querySelector("body"),a=document.querySelector("#"+n);r.style.overflow="hidden",(0,i.append)(a,t);var s=this.getModal(),c=s.querySelector(".js-lookforward-close-btn");if(this.historyLength+=1,c.addEventListener("click",function(){window.history&&e.options.useHistoryApi?window.history.back():e.removeModal()}),"string"==typeof o){var u=s.querySelectorAll(o);[].forEach.call(u,function(t){e.addClickEvent(t)})}return s}},{key:"getModals",value:function(){return document.querySelectorAll("#"+this.id+" [data-root]")}},{key:"getModal",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"last";return document.querySelector("#"+this.id+" [data-root]:"+t+"-child")}},{key:"removeModal",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"last";return new s(function(n){var o=t.options.classNames,r=document.querySelector("#"+t.id+" [data-root]:"+e+"-child");r||n(),(0,i.addClass)(r,o.LookForwardClose),t.historyLength-=1,setTimeout(function(){(0,i.remove)(r),t._fireEvent("close"),n()},300)})}},{key:"buildHtml",value:function(t,e,n,o){var r=this.options.classNames;return'\n      <div class="'+r.LookForward+'" data-root data-animation id="'+e+'">\n        <button class="'+r.LookForwardCloseBtn+' js-lookforward-close-btn"></button>\n        <div class="'+r.LookForwardBody+'" data-body>\n          <div class="'+r.LookForwardHeader+'">     \n          </div>\n          <div class="'+r.LookForwardInner+" _enter-"+n+" _leave-"+o+'">\n            '+t+'\n          </div>\n          <div class="'+r.LookForwardFooter+'">\n          </div>\n        </div>\n      </div>\n    '}},{key:"_fireEvent",value:function(t){var e=document.querySelector("#"+this.id);(0,i.triggerEvent)(e,t)}}]),t}();n.default=u,e.exports=n.default},{"../lib/util":6,"es6-object-assign":1,"es6-promise-polyfill":2}],5:[function(t,e,n){"use strict";e.exports=t("./core/")},{"./core/":4}],6:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("es6-promise-polyfill").Promise;n.fetch=function(t){return new o(function(e,n){var o=new XMLHttpRequest;o.onload=function(){e(o.response)},o.onerror=function(){n()},o.open("GET",t),o.responseType="document",o.send()})},n.append=function(t,e){var n=new DOMParser,o=n.parseFromString(e,"text/html");t.appendChild(o.querySelector("body").childNodes[0])},n.prepend=function(t,e){var n=new DOMParser,o=n.parseFromString(e,"text/html");t.insertBefore(o.querySelector("body").childNodes[0],t.firstChild)},n.getUniqId=function(){return(Date.now().toString(36)+Math.random().toString(36).substr(2,5)).toUpperCase()},n.remove=function(t){t&&t.parentNode&&t.parentNode.removeChild(t)},n.addClass=function(t,e){t.classList?t.classList.add(e):t.className+=" "+e},n.triggerEvent=function(t,e,n){var o=void 0;window.CustomEvent?o=new CustomEvent(e,{cancelable:!0}):(o=document.createEvent("CustomEvent"),o.initCustomEvent(e,!1,!1,n)),t.dispatchEvent(o)}},{"es6-promise-polyfill":2}]},{},[3]);